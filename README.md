# Enhanced Michael Agent for Secret Mafia Competition

## Overview

This submission contains an enhanced Michael agent that participates in Track 1 (Social Detection) of the Secret Mafia competition. The agent uses:

- **HuggingFace Qwen3-8B model** for language understanding and generation
- **Strategy Experience Pool** for learning from brilliant actions across games
- **Advanced game state analysis** for improved decision making

## Features

### Core Agent Capabilities
- **Multi-step reasoning**: Analysis → Belief update → Strategy update → Action generation
- **Experience-based learning**: Learns from successful strategies across multiple games
- **Role-specific behavior**: Adapts strategy based on assigned role (Mafia, Villager, Detective, Doctor)
- **Context-aware decision making**: Analyzes game state and other players' behaviors

### Technical Features
- **Local model inference**: Uses HuggingFace transformers for model loading and inference
- **Memory management**: Efficient handling of game history and strategic experiences
- **Error handling**: Robust error recovery and fallback mechanisms
- **Logging capabilities**: Comprehensive logging for debugging and analysis

## Installation

### Installation Steps

1. **Install dependencies**:
```bash
pip install -r requirements.txt
```

2. **Verify installation**:
```bash
python -c "import torch; print(f'PyTorch version: {torch.__version__}')"
python -c "import transformers; print(f'Transformers version: {transformers.__version__}')"
```

## Usage

### Run online/offline

We use `submit_run.py` to evaluate online and use `offline_play.py` to evaluate offline.
You can refer to these two scripts to set our agent into ur evaluation.

⚠️**Please note that there is a parameter called ''enable_learning'' in the configuration of our agent; please set it to true.**⚠️
We use the official large model without any fine-tuning or training. Therefore, you can download Qwen3-8B as the base model from Hugging Face or other official channels.



## File Structure

```
├── submit_run.py              # Main submission entry point
├── requirements.txt           # Fixed package dependencies
├── README.md                 # This file
├── src/
│   ├── huggingface_agent.py  # Enhanced agent with HuggingFace integration
│   ├── strategy_pool.py      # Strategy experience pool management
│   ├── game_state_analyzer.py # Game state analysis utilities
│   ├── brilliant_action_detector.py # Brilliant action detection
│   └── strategy_matcher.py   # Strategy matching and retrieval
├── strategy_experiences/
│   └── experiences.json      # Pre-trained strategy experiences (3.1MB)
└── xushuhang/
    └── agents/
        └── family.py         # Original agent implementations
```

## Strategy Experience Pool

The agent includes a comprehensive strategy experience pool containing:

- **pre-trained experiences** from previous games
- **Role-specific strategies** for different game situations
- **Successful action patterns** that have proven effective
- **Context-aware matching** to find relevant strategies for current situations

All experiences are generated by the LLM (Large Language Model) during its self-play and decision-making processes using the same set of prompts, with no manually imposed logic. Therefore, this complies with the competition rules.


## Help

If you have any questions or need assistance, please contact us at <379252@qq.com>.